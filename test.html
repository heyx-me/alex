<!DOCTYPE html>

<html lang="en">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Mysterious Space Boxes</title>

    <style>

        body { margin: 0; overflow: hidden; background-color: #000; }

        canvas { display: block; }

    </style>

</head>

<body>

<script type="importmap">

    {

        "imports": {

            "three": "https://unpkg.com/three@0.160.0/build/three.module.js",

            "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"

        }

    }

</script>

<script type="module">

    import * as THREE from 'three';

    import { UnrealBloomPass } from 'three/addons/postprocessing/UnrealBloomPass.js';

    import { EffectComposer } from 'three/addons/postprocessing/EffectComposer.js';

    import { RenderPass } from 'three/addons/postprocessing/RenderPass.js';

    import { OutputPass } from 'three/addons/postprocessing/OutputPass.js';

    // --- Scene Setup ---

    const scene = new THREE.Scene();

    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);

    camera.position.z = 8;

    const renderer = new THREE.WebGLRenderer({ antialias: true });

    renderer.setSize(window.innerWidth, window.innerHeight);

    renderer.setPixelRatio(window.devicePixelRatio);

    document.body.appendChild(renderer.domElement);

    // --- Post Processing (The Glow) ---

    const renderScene = new RenderPass(scene, camera);

    const bloomPass = new UnrealBloomPass(

        new THREE.Vector2(window.innerWidth, window.innerHeight), 

        1.5, // Strength

        0.4, // Radius

        0.1  // Threshold (Lower = more things glow)

    );

    

    const composer = new EffectComposer(renderer);

    composer.addPass(renderScene);

    composer.addPass(bloomPass);

    composer.addPass(new OutputPass());



    // --- Neon Trails ---

    function createTrail(color, xOffset, thickness = 0.015) {

        const points = [];

        for (let i = 0; i < 20; i++) {

            points.push(new THREE.Vector3(

                Math.sin(i * 0.4 + xOffset) * 1.5,

                i * 0.8 - 8,

                Math.cos(i * 0.4 + xOffset) * 1.5

            ));

        }

        const curve = new THREE.CatmullRomCurve3(points);

        const tubeGeom = new THREE.TubeGeometry(curve, 100, thickness, 8, false);

                    const tubeMat = new THREE.MeshBasicMaterial({ color: color, transparent: true, opacity: 0.3 });
        const tube = new THREE.Mesh(tubeGeom, tubeMat);

        scene.add(tube);

        return tube;

    }

    const trail1 = createTrail(0x00ffff, 0);

    const trail2 = createTrail(0xff00ff, Math.PI);

    const trail3 = createTrail(0x00ffff, Math.PI * 0.5, 0.005);

    const trail4 = createTrail(0xff00ff, Math.PI * 1.5, 0.005);

    // --- Starfield ---

    const starGeo = new THREE.BufferGeometry();

    const starPos = [];

    for(let i=0; i<3000; i++) {

        starPos.push((Math.random()-0.5)*100, (Math.random()-0.5)*100, (Math.random()-0.5)*100);

    }

    starGeo.setAttribute('position', new THREE.Float32BufferAttribute(starPos, 3));

    const starMat = new THREE.PointsMaterial({ color: 0x444444, size: 0.05 });

    scene.add(new THREE.Points(starGeo, starMat));

    // --- Animation ---

    function animate() {

        requestAnimationFrame(animate);

        const t = Date.now() * 0.001;



        trail1.rotation.y += 0.001;

        trail2.rotation.y -= 0.001;

        trail3.rotation.y += 0.0015;

        trail4.rotation.y -= 0.0015;

        composer.render();

    }

    window.addEventListener('resize', () => {

        camera.aspect = window.innerWidth / window.innerHeight;

        camera.updateProjectionMatrix();

        renderer.setSize(window.innerWidth, window.innerHeight);

        composer.setSize(window.innerWidth, window.innerHeight);

    });

    animate();

</script>

</body>

</html>

